local Players = game:GetService("Players")
local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local CoreGui = game:GetService("CoreGui")

-- Xóa GUI cũ nếu có
if CoreGui:FindFirstChild("ToolNameGUI") then
	CoreGui.ToolNameGUI:Destroy()
end

-- Tạo GUI
local screenGui = Instance.new("ScreenGui", CoreGui)
screenGui.Name = "ToolNameGUI"
screenGui.ResetOnSpawn = false

local dragFrame = Instance.new("Frame", screenGui)
dragFrame.Size = UDim2.new(0, 200, 0, 40)
dragFrame.Position = UDim2.new(0.5, -100, 0.85, 0)
dragFrame.BackgroundTransparency = 0.3
dragFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
dragFrame.Active = true
dragFrame.Draggable = true

local textLabel = Instance.new("TextLabel", dragFrame)
textLabel.Size = UDim2.new(1, 0, 1, 0)
textLabel.BackgroundTransparency = 1
textLabel.TextColor3 = Color3.new(1, 1, 1)
textLabel.Font = Enum.Font.SourceSansBold
textLabel.TextSize = 24
textLabel.Text = "Tool: None"

-- Tạo nút Copy
local copyButton = Instance.new("TextButton", screenGui)
copyButton.Size = UDim2.new(0, 60, 0, 25)
copyButton.Position = UDim2.new(0.5, -100, 0.85, 45)
copyButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
copyButton.TextColor3 = Color3.new(1, 1, 1)
copyButton.Text = "Copy"
copyButton.TextScaled = true

copyButton.MouseButton1Click:Connect(function()
	local tool = player.Character and player.Character:FindFirstChildOfClass("Tool")
	if tool then
		setclipboard(tool.Name)
	end
end)

-- Tạo nút Xóa GUI
local removeButton = Instance.new("TextButton", screenGui)
removeButton.Size = UDim2.new(0, 60, 0, 25)
removeButton.Position = UDim2.new(0.5, -30, 0.85, 45)
removeButton.BackgroundColor3 = Color3.fromRGB(60, 0, 0)
removeButton.TextColor3 = Color3.new(1, 1, 1)
removeButton.Text = "Xóa"
removeButton.TextScaled = true

removeButton.MouseButton1Click:Connect(function()
	screenGui:Destroy()
end)

-- Cập nhật tên tool đang cầm
local function updateToolName()
	local tool = player.Character and player.Character:FindFirstChildOfClass("Tool")
	if tool then
		textLabel.Text = "Tool: " .. tool.Name
	else
		textLabel.Text = "Tool: None"
	end
end

-- Theo dõi khi trang bị hoặc bỏ tool
player.CharacterAdded:Connect(function(c)
	char = c
	c.ChildAdded:Connect(function(obj)
		if obj:IsA("Tool") then updateToolName() end
	end)
	c.ChildRemoved:Connect(function(obj)
		if obj:IsA("Tool") then updateToolName() end
	end)
	updateToolName()
end)

char.ChildAdded:Connect(function(obj)
	if obj:IsA("Tool") then updateToolName() end
end)

char.ChildRemoved:Connect(function(obj)
	if obj:IsA("Tool") then updateToolName() end
end)

-- Lần đầu chạy
updateToolName()